-show_actions = current_user.can_update?(Division) || current_user.can_delete?(Division)

.card
  = render 'layouts/card_header'
  .card-body
    = paginate @divisions, theme: 'twitter-bootstrap-4'

    %table.table.table-striped.table-bordered
      %tr
        %th Name
        %th Code
        %th Owner
        -if show_actions
          %th.actions Actions

      - @divisions.each do |division|
        %tr
          %td= secured_link division
          %td= division.code
          %td= secured_link(division.owner)
          -if show_actions
            %td
              -if current_user.can_update?(division)
                = link_to icon(:pencil, 'Edit'), edit_division_path(division), class: 'btn btn-sm btn-secondary btn-block'
              -if current_user.can_delete?(division)
                = link_to icon(:times, 'Delete'), division, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm btn-block'

    = paginate @divisions, theme: 'twitter-bootstrap-4'

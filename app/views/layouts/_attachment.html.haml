-if record.persisted? && record.send(attachment_name).attached?
  - attachment = record.send(attachment_name)
  - label_override = defined?(override_label) && override_label.present? ? override_label : nil
  - no_delete = (defined?(no_delete_button) && no_delete_button) || !current_user.can_update?(record)
  - delete_link = no_delete ? nil : link_to('x', RadCommon::Engine.routes.url_helpers.attachment_path(record.send(attachment_name).id), method: :delete, data: { confirm: 'Are you sure? Attachment cannot be recovered.' }, class: 'btn btn-danger btn-sm')
  -if attachment.content_type.include?('image')
    - link = defined?(override_path) && override_path.present? ? override_path : url_for(attachment)
    - target = defined?(new_tab) && new_tab ? '_blank' : nil
    - attachment_label = label_override.present? ? label_override : image_tag(attachment, class: 'img-fluid', id: 'attachment_layout')
    = link_to(attachment_label, link, target: target)
    = delete_link
  -else
    - attachment_label = label_override.present? ? label_override : content_tag(:i, '', class: 'fa fa-paperclip')
    = link_to attachment_label, url_for(attachment), target: '_blank'
    = delete_link
